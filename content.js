!function(){"use strict";const e=console.log,t=console.warn,n=console.error,r=(console.assert,(...t)=>{e("%c[SD-D]","background: green; color: white; padding: 2px;",...t)}),o=(...e)=>{t("%c[SD-D]","background: orange; color: black; padding: 2px;",...e)},a=(...e)=>{n("%c[SD-D]","background: red; color: white; padding: 2px;",...e)},s=(()=>{try{if(chrome)return chrome}catch(e){}try{if(browser)return browser}catch(e){}return{}})();function d(){document.querySelectorAll('button[data-specific-auth-trigger="download"]').forEach(e=>{if(e.dataset.replaced)return;const t=function(){const e=document.createElement("button");return e.innerHTML='\n    <svg \n      xmlns="http://www.w3.org/2000/svg" \n      width="22" \n      height="22" \n      viewBox="0 0 24 24" \n      fill="none" \n      stroke="currentColor" \n      stroke-width="2" \n      stroke-linecap="round" \n      stroke-linejoin="round" \n      style="margin-right: 12px; vertical-align: middle;"\n    >\n      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>\n      <polyline points="7 10 12 15 17 10"></polyline>\n      <line x1="12" y1="15" x2="12" y2="3"></line>\n    </svg>Download',Object.assign(e.style,{display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"15px",fontWeight:"600",color:"white",background:"linear-gradient(145deg, #0d6efd, #0a58ca)",padding:"11px 20px",border:"1px solid #0a53be",borderRadius:"10px",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2), 0 1px 2px rgba(13, 110, 253, 0.5) inset",cursor:"pointer",transition:"all 0.25s ease-out",letterSpacing:"0.5px"}),e.onmouseover=()=>{e.style.transform="translateY(-2px)",e.style.boxShadow="0 8px 20px rgba(0, 0, 0, 0.25)",e.style.background="linear-gradient(145deg, #1b7aff, #0d6efd)"},e.onmouseout=()=>{e.style.transform="translateY(0)",e.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.2), 0 1px 2px rgba(13, 110, 253, 0.5) inset",e.style.background="linear-gradient(145deg, #0d6efd, #0a58ca)"},e.onmousedown=()=>{e.style.transform="translateY(1px) scale(0.98)",e.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.2)"},e.onmouseup=()=>{e.style.transform="translateY(-2px)",e.style.boxShadow="0 8px 20px rgba(0, 0, 0, 0.25)"},e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),r("Button clicked. Asking background for PDF data..."),s.runtime.sendMessage({type:"GET_PDF_FOR_CURRENT_TAB"},e=>{if(s.runtime.lastError)return a("Error fetching PDF data:",s.runtime.lastError.message),void alert("Could not connect to the extension. Please try reloading the page.");if(e&&e.url){r("PDF data found! Requesting download for:",e.name);const t={type:"DOWNLOAD_PDF",pdf:e};s.runtime.sendMessage(t)}else o("Background script reports no PDF is ready for this tab."),alert("Download not ready. Please ensure the document preview has fully loaded and try again.")})}),e}();e.parentNode&&(e.parentNode.replaceChild(t,e),e.dataset.replaced="true")})}d(),function(){const e='button[data-specific-auth-trigger="download"]';new MutationObserver(t=>{for(const n of t)if("childList"===n.type&&n.addedNodes.length>0){Array.from(n.addedNodes).some(t=>1===t.nodeType&&(t.matches(e)||t.querySelector(e)))&&d()}}).observe(document.body,{childList:!0,subtree:!0})}()}();
